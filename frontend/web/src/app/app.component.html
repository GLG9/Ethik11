<a class="skip-link" href="#main-content">Zum Inhalt springen</a>

<div #menuStatus id="menu-status" class="sr-only" aria-live="polite"></div>

<div
  #overlay
  class="overlay"
  [class.is-visible]="menuOpen"
  (click)="closeMenu()"
  aria-hidden="true"
></div>

<aside
  #offcanvas
  class="offcanvas"
  id="site-menu"
  role="dialog"
  aria-modal="true"
  aria-labelledby="menuTitle"
  [attr.aria-hidden]="menuOpen ? 'false' : 'true'"
  [class.is-open]="menuOpen"
  (keydown)="handleMenuKeydown($event)"
>
  <div class="offcanvas__header">
    <h2 id="menuTitle">Men√º</h2>
    <button
      type="button"
      class="icon-button"
      (click)="closeMenu()"
      [attr.tabindex]="menuOpen ? null : '-1'"
      #menuClose
    >
      <span class="sr-only">Men√º schlie√üen</span>
      <span aria-hidden="true">√ó</span>
    </button>
  </div>
  <nav class="offcanvas__nav" aria-label="Hauptnavigation">
    <div class="menu-group">
      <a
        class="menu-link menu-link--primary"
        routerLink="/"
        routerLinkActive="is-active"
        [routerLinkActiveOptions]="{ exact: true }"
        (click)="closeMenu(false)"
        [attr.tabindex]="menuOpen ? null : '-1'"
      >
        Hauptseite
      </a>
    </div>

    <div class="menu-section">
      <p class="menu-section__label">KI-Modelle</p>
      <ul class="menu-list menu-list--slim">
        <li *ngFor="let model of kiNavigation">
          <a
            class="menu-link"
            [routerLink]="model.route"
            routerLinkActive="is-active"
            (click)="closeMenu(false)"
            [attr.tabindex]="menuOpen ? null : '-1'"
          >
            <span>{{ model.label }}</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="menu-list__utility">
      <div class="menu-progress" role="status" aria-live="polite">
        <div class="menu-progress__label">
          {{ visitedCount }} / {{ totalModels }} Modelle befragt
        </div>
        <div class="menu-progress__bar" aria-hidden="true">
          <div
            class="menu-progress__fill"
            [style.width.%]="(visitedCount / totalModels) * 100"
          ></div>
        </div>
      </div>
      <a
        *ngIf="visitedCount >= totalModels; else quizLocked"
        class="menu-link menu-link--primary"
        routerLink="/quiz"
        (click)="closeMenu(false)"
      >
        Quiz starten
      </a>
      <ng-template #quizLocked>
        <button
          type="button"
          class="menu-link menu-link--disabled"
          aria-disabled="true"
          tabindex="-1"
          data-tooltip="Stelle erst allen KI-Modellen eine Frage"
          (mouseenter)="announceSoon()"
          (pointerdown)="announceSoon($event)"
        >
          Quiz gesperrt
        </button>
      </ng-template>
    </div>

    <div class="menu-news">
      <a
        class="menu-link menu-link--news"
        routerLink="/news"
        routerLinkActive="is-active"
        (click)="closeMenu(false)"
        [attr.tabindex]="menuOpen ? null : '-1'"
      >
        <span class="menu-link__icon" aria-hidden="true">üóû</span>
        <span>News</span>
      </a>
    </div>
  </nav>
</aside>

<header id="site-header" class="site-header">
  <button
    type="button"
    class="hamburger"
    [attr.aria-expanded]="menuOpen ? 'true' : 'false'"
    aria-controls="site-menu"
    (click)="toggleMenu()"
    #menuToggle
  >
    <span class="sr-only">Navigation √∂ffnen</span>
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
  </button>
</header>

<ng-container *ngIf="showLanding; else routedContent">
  <section class="hero" aria-labelledby="hero-title">
    <ul class="philosopher-strip" aria-label="Philosophen Galerie">
      <li *ngFor="let philosopher of philosophers">
        <button
          type="button"
          class="strip-item"
          [class.is-active]="currentSection === philosopher.id"
          (click)="onStripClick(philosopher.id)"
          [attr.aria-current]="currentSection === philosopher.id ? 'true' : null"
        >
          <img
            [src]="philosopher.portrait.thumb"
            [alt]="philosopher.portrait.alt"
            loading="lazy"
            decoding="async"
            width="300"
            height="300"
          />
          <span class="strip-caption">{{ philosopher.name }}</span>
        </button>
      </li>
    </ul>
    <div class="site-heading">
      <h1 id="hero-title" class="site-title site-title--bleed">Philosophische Menschenbilder</h1>
    </div>
  </section>

  <main id="main-content">
    <section
      id="intro"
      class="intro scroll-target"
      tabindex="-1"
      #scrollTargetElement
    >
      <div class="intro__inner">
        <p>
          Diese Ausstellung f√ºhrt durch f√ºnf pr√§gende Perspektiven auf das Menschenbild und verkn√ºpft historische Kontexte mit aktuellen Fragen. Die Szenografie ist inspiriert von musealen F√ºhrungen: ruhige √úberg√§nge, pr√§zise Schl√ºsselideen, vergleichende Blickachsen.
        </p>
      </div>
    </section>

    <div id="philosopher-sections" class="philosopher-collection">
      <section
        *ngFor="let philosopher of philosophers; let index = index"
        class="philosopher-section scroll-target"
        [attr.id]="philosopher.id"
        tabindex="-1"
        #scrollTargetElement
      >
        <div class="philosopher-inner">
          <figure class="philosopher-figure">
            <img
              [src]="philosopher.portrait.thumb"
              [alt]="philosopher.portrait.alt"
              loading="lazy"
              decoding="async"
              width="480"
              height="640"
              sizes="(min-width: 1281px) 420px, (min-width: 901px) 360px, (min-width: 601px) 50vw, 80vw"
            />
            <figcaption>{{ philosopher.portrait.caption }}</figcaption>
          </figure>
          <div class="philosopher-content">
            <header class="philosopher-header">
              <h2>{{ philosopher.name }}</h2>
              <p class="philosopher-vita">
                Lebensdaten: {{ philosopher.life }}<ng-container *ngIf="philosopher.epoch"> ‚Ä¢ Epoche: {{ philosopher.epoch }}</ng-container>
              </p>
              <p class="philosopher-abstract">
                {{ philosopher.summary }}
              </p>
              <p class="philosopher-highlight" *ngIf="philosopher.keyline">
                {{ philosopher.keyline }}
              </p>
            </header>
            <div class="philosopher-ideas">
              <h3>Hauptideen</h3>
              <ul>
                <li *ngFor="let idea of philosopher.ideas">
                  {{ idea }}
                </li>
              </ul>
            </div>
            <blockquote class="philosopher-quote" *ngIf="philosopher.quote">
              ‚Äû{{ philosopher.quote }}‚Äù
              <cite *ngIf="philosopher.quoteSource">{{ philosopher.quoteSource }}</cite>
            </blockquote>
          </div>
        </div>
      </section>
    </div>

    <section
      id="vergleichen"
      class="compare-section scroll-target"
      tabindex="-1"
      #scrollTargetElement
    >
      <header class="section-header">
        <h2>Vergleichen</h2>
        <p class="section-subtitle">
          Ein schneller Blick auf Gemeinsamkeiten, Differenzen und kritische Hinweise.
        </p>
      </header>

      <p class="compare-hint">
        W√§hle {{ compareColumnCount }} Philosoph:innen f√ºr den Direktvergleich.
      </p>

      <div
        class="compare-columns"
        [class.columns-2]="compareColumnCount === 2"
        [class.columns-3]="compareColumnCount === 3"
      >
        <article
          class="compare-column"
          *ngFor="let selection of visibleCompareSelections; let i = index; trackBy: trackCompareCard"
        >
          <div class="compare-select">
            <label class="compare-select__label" [attr.for]="'compare-select-' + i">
              Perspektive {{ i + 1 }}
            </label>
            <div class="select-shell">
              <select
                class="compare-select__control"
                [id]="'compare-select-' + i"
                [value]="selection"
                (change)="onCompareSelectionChange(i, $any($event.target).value)"
              >
                <option
                  *ngFor="let philosopher of philosophers"
                  [value]="philosopher.id"
                  [disabled]="isOptionDisabled(philosopher.id, i)"
                >
                  {{ philosopher.name }}
                </option>
              </select>
              <span class="select-caret" aria-hidden="true">‚åÑ</span>
            </div>
          </div>
          <ng-container *ngIf="getPhilosopherById(selection) as philosopher">
            <div class="compare-meta">
              <p class="compare-name">{{ philosopher.name }}</p>
              <p class="compare-life">
                {{ philosopher.life }}
                <ng-container *ngIf="philosopher.epoch">¬∑ {{ philosopher.epoch }}</ng-container>
              </p>
              <p class="compare-summary">{{ philosopher.summary }}</p>
              <p class="compare-highlight" *ngIf="philosopher.keyline">{{ philosopher.keyline }}</p>
            </div>
          </ng-container>
        </article>
      </div>

      <div class="compare-specs" aria-live="polite">
        <div class="spec-row" *ngFor="let row of compareRows">
          <p class="spec-label">{{ row.label }}</p>
          <ng-container *ngIf="getRowSharedValue(row) as shared; else contrastRow">
            <div class="spec-shared">
              <span>{{ shared }}</span>
            </div>
          </ng-container>
          <ng-template #contrastRow>
            <div class="spec-columns" [class.columns-2]="compareColumnCount === 2" [class.columns-3]="compareColumnCount === 3">
              <div class="spec-entry" *ngFor="let entry of getRowEntries(row)">
                <span class="entry-name">{{ entry.name }}</span>
                <p>{{ entry.value }}</p>
              </div>
            </div>
          </ng-template>
        </div>
      </div>
    </section>
  </main>
</ng-container>

<ng-template #routedContent>
  <section class="ki-page">
    <router-outlet></router-outlet>
  </section>
</ng-template>

<footer class="site-footer">
  <small>Kuratiert f√ºr den digitalen Seminarraum &ndash; inspiriert von Klassikern der philosophischen Anthropologie.</small>
</footer>
